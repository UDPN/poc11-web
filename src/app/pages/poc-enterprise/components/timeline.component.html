<!--
 * @Author: chenyuting
 * @Date: 2025-01-20 14:03:37
 * @LastEditors: chenyuting
 * @LastEditTime: 2025-01-20 17:26:17
 * @Description: 
-->

<nz-card
  class="none-bottom m-t-25"
  nzBordered="false"
  nzTitle="Transaction Status"
>
  <div class="time-line">
    <nz-steps nzDirection="vertical" nzSize="small">
      <nz-step
        [nzTitle]="'Created'"
        [nzStatus]="'finish'"
        [nzDescription]="'on ' + ' time ' + ' by ' + info.name"
      ></nz-step>
      <nz-step
        [nzTitle]="'Approval'"
        [nzStatus]="'process'"
        [nzDescription]="approvalTpl"
      ></nz-step>
      <nz-step
        [nzTitle]="'On-chain execution'"
        [nzStatus]="'wait'"
        [nzDescription]="
          'The enterprise onboarding is waiting to be executed on the chain'
        "
      ></nz-step>
    </nz-steps>
  </div>
</nz-card>

<ng-template #approvalTpl>
  <!-- Success/Rejected -->
  <ng-container>
    <span>{{ 'on ' + ' time ' + ' by ' + 'user ' }}</span>
    <div
      *ngIf=""
      style="background-color: rgba(254, 215, 215, 0.3)"
      class="m-t-10 p-8"
    >
      reason
    </div>
  </ng-container>
  <!-- Pending Approval -->
  <ng-container>
    <span
      >{{
        'The ' + type + " creation request is awaiting admin's confirmation"
      }}
    </span>
    <ng-container *ngIf="!rejectStatus">
      <nz-space class="m-t-10 m-b-10">
        <button
          *nzSpaceItem
          nz-button
          [nzSize]="'large'"
          nzType="primary"
          nzDanger
          (click)="getStatus(1)"
        >
          Reject</button
        ><button
          *nzSpaceItem
          nz-button
          [nzSize]="'large'"
          nzType="primary"
          [nzLoading]="isLoading"
          (click)="getStatus(2, true)"
        >
          Approve
        </button></nz-space
      >
    </ng-container>
    <ng-container *ngIf="rejectStatus">
      <form nz-form [formGroup]="validateForm" class="m-t-25 m-b-30">
        <nz-form-item nz-col nzSpan="20">
          <nz-form-label nzRequired nzSpan="24">Reason</nz-form-label>
          <nz-form-control [nzErrorTip]="reasonError">
            <div nz-row>
              <div nz-col nzSpan="24">
                <textarea rows="5" nz-input formControlName="reason"></textarea>
              </div>
            </div>
            <ng-template #reasonError let-control>
              <ng-container *ngIf="control.hasError('required')"
                >Please input your Reason</ng-container
              >
            </ng-template>
          </nz-form-control>
        </nz-form-item>
      </form>
      <nz-space>
        <button
          *nzSpaceItem
          nz-button
          [nzSize]="'large'"
          (click)="getStatus(2)"
        >
          Cancel</button
        ><button
          *nzSpaceItem
          nz-button
          [nzSize]="'large'"
          nzType="primary"
          nzDanger
          [nzLoading]="isLoading"
          (click)="getApproval('reject')"
        >
          Reject
        </button></nz-space
      >
    </ng-container>
  </ng-container>
</ng-template>
<!-- <div>
  <i
    nz-icon
    nzType="check-circle"
    nzTheme="twotone"
    style="font-size: 24px"
  ></i>
</div> -->
